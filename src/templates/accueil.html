{% extends 'test.html.twig' %}

{% block title %}Accueil SQLuedo{% endblock %}

{% block navAcceuil %}
<nav class="bg-gray-100 text-white ">
    <div class="container mx-auto flex justify-between items-center">
        {% if session == 'admin' %}
            <a href="/SQLuedo/src/admin/afficherCreation" class="return-link">
                <img src="/SQLuedo/src/images/ajout_admin.png" alt="documentation admin" class="ml-10 w-12">
            </a>
            <a href="/SQLuedo/src/index/pageConnexionProfil" class="return-link">
                <img src="/SQLuedo/src/images/connexion_petit.png" alt="connexion moyen" class="mr-10">
            </a>
        {% else %}
            <a href="/SQLuedo/src/templates/documentationSQL.html" target="_blank" class="return-link">
                <img src="/SQLuedo/src/images/documentationpng.png" alt="documentation" class="ml-10">
            </a>
            <a href="/SQLuedo/src/index/pageConnexionProfil" class="return-link">
                <img src="/SQLuedo/src/images/connexion_petit.png" alt="connexion petit" class="mr-10">
            </a>
        {% endif %}
    </div>
</nav>
{% endblock %}


{% block content %}
<div class="bg-gray-100 min-h-screen">
    <div class="text-center m-20">
        <h1 class="text-4xl font-black text-gray-900 dark:text-white">SQLUEDO</h1>
    </div>
    <div class="grid grid-cols-4 md:grid-cols-3 gap-32 justify-items-center">
        {% if session == 'admin' %}

            {% for enquete in enquetes %}
                <div class="w-3/4 p-6 bg-white border-2 border-black rounded-lg shadow dark:bg-gray-800 dark:border-gray-900">
                    <div class="flex items-center">
                        <a href="/SQLuedo/src/index/{{ enquete.id }}/vueJeu" class="flex-grow">
                            <h5 class="mb-2 text-2xl font-bold tracking-tight text-center text-gray-900 dark:text-white">
                                {{ enquete.titre }}
                            </h5>
                        </a>

                        <input type="checkbox" id="ouvrirPopup" class="hidden peer">

                        <!-- Image qui ouvre le popup -->
                        <label for="ouvrirPopup" class="cursor-pointer">
                            <img src="/SQLuedo/src/images/interdit.png" alt="interdit" class="w-8 h-8">
                        </label>

                        <!-- Popup -->
                        <div class="peer-checked:flex fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center">
                            <div class="bg-white p-6 rounded-lg shadow-lg max-w-md w-full">
                                <p class="pb-5">Êtes-vous sûr de vouloir supprimer l'enquête ?</p>
                                <div class="flex justify-around">
                                    <!-- Bouton Annuler -->
                                    <label for="ouvrirPopup" class="cursor-pointer bg-gray-300 text-white px-4 py-2 rounded">
                                        Annuler
                                    </label>
                                    <!-- Bouton Supprimer -->
                                    <label for="ouvrirPopup" class="cursor-pointer bg-red-500 text-white px-4 py-2 rounded">
                                        <a href="/SQLuedo/src/index/supprimerEnquete"> Supprimer l'enquête </a>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="mb-3 font-normal text-justify text-gray-700 dark:text-gray-400">{{ enquete.description }}</p>
                    <div class="flex-grow text-center">
                        <a href="/SQLuedo/src/index/{{ enquete.id }}/vueJeu" class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                            Lire plus
                        </a>
                    </div>
                </div>
            {% endfor %}

        {% else %}

            {% for enquete in enquetes %}
                <div class="w-3/4 p-6 bg-white border-2 border-black rounded-lg shadow dark:bg-gray-800 dark:border-gray-900">
                    <div class="flex items-center">
                        <a href="/SQLuedo/src/index/{{ enquete.id }}/vueJeu" class="flex-grow">
                            <h5 class="mb-2 text-2xl font-bold tracking-tight text-center text-gray-900 dark:text-white">
                                {{ enquete.titre }}
                            </h5>
                        </a>
                    </div>
                    <p class="mb-3 font-normal text-justify text-gray-700 dark:text-gray-400">{{ enquete.description }}</p>
                    <div class="flex-grow text-center">
                        <a href="/SQLuedo/src/index/{{ enquete.id }}/vueJeu" class="inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                            Lire plus
                        </a>
                    </div>
                </div>
            {% endfor %}

        {% endif %}

    </div>
</div>
{% endblock %}
